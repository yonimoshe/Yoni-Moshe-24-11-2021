(this["webpackJsonpabra-app"]=this["webpackJsonpabra-app"]||[]).push([[0],{115:function(e,t,c){},116:function(e,t,c){},148:function(e,t,c){},149:function(e,t,c){},150:function(e,t,c){},151:function(e,t,c){},152:function(e,t,c){},153:function(e,t,c){},154:function(e,t,c){},156:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(24),i=c.n(r),s=c(17),o=c(46),l=c(97),u=(c(115),c(9)),j=c(31),d=c(208),b=c(204),O=c(206),h=(c(116),c(2));var f=function(){var e=n.a.useState(null),t=Object(u.a)(e,2),c=t[0],a=t[1],r=Boolean(c),i=function(){a(null)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("header",{className:"header-container",children:[Object(h.jsx)(j.b,{className:"logo-link",to:"/",children:"Logo"}),Object(h.jsxs)("nav",{children:[Object(h.jsx)(d.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":r?"true":void 0,onClick:function(e){a(e.currentTarget)},children:Object(h.jsxs)("div",{className:"hamburger",children:[Object(h.jsx)("div",{className:"line"}),Object(h.jsx)("div",{className:"line"}),Object(h.jsx)("div",{className:"line"})]})}),Object(h.jsxs)(b.a,{id:"basic-menu",anchorEl:c,open:r,onClose:i,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(h.jsx)(O.a,{onClick:i,children:Object(h.jsx)(j.c,{className:function(e){return e.isActive?"nav-link-active":"nav-link"},to:"/",children:"Home"})}),Object(h.jsx)(O.a,{onClick:i,children:Object(h.jsx)(j.c,{className:function(e){return e.isActive?"nav-link-active":"nav-link"},to:"/favorites",children:"Favorites"})})]}),Object(h.jsxs)("ul",{className:"list-container",children:[Object(h.jsx)("li",{children:Object(h.jsx)(j.c,{className:function(e){return e.isActive?"nav-link-active":"nav-link"},to:"/",children:"Home"})}),Object(h.jsx)("li",{children:Object(h.jsx)(j.c,{className:function(e){return e.isActive?"nav-link-active":"nav-link"},to:"/favorites",children:"Favorites"})})]})]})]})})},p=c(203),m=c(96),v=c.n(m),x=c(95),g=c.n(x),y=c(28),N=c.n(y),C=c(38),S=c(91),T=c.n(S),k="FETCH_CURRENT_CITY_WEATHER",E="FETCH_FORECAST_CITY_WEATHER",w=c(39),I=c.n(w),R=c(21),F=(c(67),function(e,t){return function(){var c=Object(C.a)(N.a.mark((function c(a){var n,r,i,s;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,I.a.get("https://dataservice.accuweather.com/currentconditions/v1/".concat(t,"?apikey=").concat("LjEUfGR3AcoDRt53CmW0qfOsxNiDSUCH"));case 3:n=c.sent,r=n.data[0].WeatherIcon,i="https://developer.accuweather.com/sites/default/files/".concat(r,"-s.png"),r<10&&(i="https://developer.accuweather.com/sites/default/files/0".concat(r,"-s.png")),s=[n.data[0].WeatherText,n.data[0].Temperature.Metric.Value,n.data[0].Temperature.Metric.Unit],a({type:k,payload:[s[1],s[0],e,t,i,s[2]]}),c.next=15;break;case 11:c.prev=11,c.t0=c.catch(0),R.a.error("Oops...Cant fetch current weather, Problem with server conaction... ",{position:R.a.POSITION.TOP_CENTER,autoClose:2e3}),console.log(c.t0);case 15:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e){return c.apply(this,arguments)}}()}),P=function(e){return function(){var t=Object(C.a)(N.a.mark((function t(c){var a,n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(e,"?apikey=").concat("LjEUfGR3AcoDRt53CmW0qfOsxNiDSUCH","&metric=true"));case 3:a=t.sent,n=a.data.DailyForecasts,c({type:E,payload:n}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),R.a.error("Oops... Cant fetch forecast, Problem with server conaction... ",{position:R.a.POSITION.TOP_CENTER,autoClose:2e3}),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};c(148);R.a.configure();var _=function(e){var t=Object(a.useState)(""),c=Object(u.a)(t,2),n=c[0],r=c[1],i=Object(a.useState)(""),o=Object(u.a)(i,2),l=o[0],j=o[1],d=Object(a.useState)([]),b=Object(u.a)(d,2),O=b[0],f=b[1],p=Object(a.useState)(!1),m=Object(u.a)(p,2),v=m[0],x=m[1],g=Object(s.b)();return Object(a.useEffect)((function(){v&&(g(F(n,l)),g(P(l)),x(!1))}),[n,l]),Object(h.jsx)("div",{className:"input-row",children:Object(h.jsx)(T.a,{inputProps:{placeholder:"Type City",autoComplete:"abcd",name:"city",id:"city",value:n,onChange:function(e,t){var c=t.newValue,a=/[^A-Za-z\s]/gi;a.test(c)&&(R.a.error("Sorry... English Please",{position:R.a.POSITION.TOP_CENTER,autoClose:2e3}),c=c.replace(a,"")),r(c)}},suggestions:O,onSuggestionsFetchRequested:function(){var e=Object(C.a)(N.a.mark((function e(t){var c,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.value){e.next=4;break}return f([]),e.abrupt("return");case 4:return e.prev=4,e.next=7,I.a.get("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?q=".concat(c,"&apikey=").concat("LjEUfGR3AcoDRt53CmW0qfOsxNiDSUCH"));case 7:a=e.sent,f(a.data.map((function(e){return{name:e.LocalizedName,key:e.Key}}))),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),f([]),R.a.error("Cant get Cities from server please try later",{position:R.a.POSITION.TOP_CENTER,autoClose:5e3}),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),onSuggestionsClearRequested:function(){f([])},onSuggestionSelected:function(e,t){var c=t.suggestion;"enter"===t.method&&e.preventDefault(),r(c.name),j(c.key),x(!0)},getSuggestionValue:function(e){return e.name},renderSuggestion:function(e){return Object(h.jsx)("div",{children:e.name})}})})};c(149);var A=function(e){var t=Object(s.c)((function(e){return e.current})),c=t.weatherText?"\xb0":"";return Object(h.jsxs)("div",{className:"current-container",children:[Object(h.jsx)("img",{src:t.weatherIcon}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:t.city}),Object(h.jsx)("span",{children:"".concat(t.temperature," ").concat(c).concat(t.units)})]})]})},D=c(209),U=c(202),V=c(210);c(150);var H=function(e){return Object(h.jsx)(D.a,{style:{height:"20vh"},className:"day-card",children:Object(h.jsxs)(U.a,{children:[Object(h.jsx)(V.a,{variant:"h6",component:"div",children:e.day}),Object(h.jsxs)("div",{className:"day-card-min-max-container",children:[Object(h.jsx)(V.a,{variant:"p",component:"div",children:"min: ".concat(e.minValue," \xb0").concat(e.units)}),Object(h.jsx)(V.a,{variant:"p",component:"div",children:"max: ".concat(e.maxValue," \xb0").concat(e.units)})]})]})})};c(151);var J=function(e){var t=Object(s.c)((function(e){return e.forecast.days})),c=[];if(t&&0!==t.length)for(var a=0;a<t.length;a++)c.push(Object(h.jsx)(p.a,{item:!0,xs:12,md:2,children:Object(h.jsx)(H,{day:t[a].Date.slice(5,10),minValue:t[a].Temperature.Minimum.Value,maxValue:t[a].Temperature.Maximum.Value,units:t[a].Temperature.Maximum.Unit})}));return Object(h.jsxs)(p.a,{className:"forecast-container",container:!0,spacing:4,children:[Object(h.jsx)(p.a,{item:!0,xs:!1,md:1}),c,Object(h.jsx)(p.a,{item:!0,xs:!1,md:1})]})};c(152);var L=function(e){var t=Object(a.useState)(!1),c=Object(u.a)(t,2),n=c[0],r=c[1],i=Object(s.c)((function(e){return e.current.weatherText})),o=Object(s.c)((function(e){return e.current.city})),l=Object(s.c)((function(e){return e.current.cityCode}));Object(s.c)((function(e){return e.forecast.days})),Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("favorites")).findIndex((function(e){return e.cityCode===l}));r(-1!==e)}),[o]);var j=n?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a,{fontSize:"large"}),Object(h.jsx)("button",{className:"remove-btn",onClick:function(){try{var e=JSON.parse(localStorage.getItem("favorites"));e=e.filter((function(e){return e.cityCode!==l})),localStorage.setItem("favorites",JSON.stringify(e)),r(!1)}catch(t){alert("ERR delete in to favorites")}},children:"Remove"})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v.a,{fontSize:"large",color:"error"}),Object(h.jsx)("button",{className:"add-btn",onClick:function(){try{var e=JSON.parse(localStorage.getItem("favorites"));e.push({city:o,cityCode:l}),localStorage.setItem("favorites",JSON.stringify(e)),r(!0)}catch(t){alert("ERR insert in to favorites")}},children:"Add"})]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p.a,{container:!0,spacing:!1,children:Object(h.jsx)(p.a,{className:"input-container",item:!0,xs:12,children:Object(h.jsx)(_,{})})}),Object(h.jsxs)(p.a,{container:!0,spacing:!1,className:"main-container",children:[Object(h.jsxs)(p.a,{container:!0,xs:12,className:"btn-icon-current-row",children:[Object(h.jsx)(p.a,{className:"current-container",item:!0,xs:6,children:Object(h.jsx)(A,{})}),Object(h.jsx)(p.a,{className:"btn-container",item:!0,xs:6,children:""===o||""===l?"":j})]}),Object(h.jsx)(p.a,{className:"description-container",item:!0,xs:12,children:Object(h.jsx)("h2",{children:i||"Not Found"})}),Object(h.jsx)(J,{})]})]})},M=c(7);c(153);var W=function(e){var t=e.city,c=(e.cityCode,e.temp),a=e.units,n=e.description,r=e.clicked;return Object(h.jsx)(D.a,{onClick:r,children:Object(h.jsxs)(U.a,{className:"city-card",children:[Object(h.jsx)(V.a,{className:"city-card-title",variant:"h5",component:"div",children:t}),Object(h.jsx)(V.a,{className:"city-card-temp",variant:"h5",component:"div",children:" ".concat(c," \xb0").concat(a)}),Object(h.jsx)(V.a,{className:"city-card-description",variant:"h5",component:"div",children:n})]})})};R.a.configure();var q=function(e){var t=Object(M.f)(),c=Object(s.b)(),n=Object(a.useState)([]),r=Object(u.a)(n,2),i=r[0],o=r[1],l=JSON.parse(localStorage.getItem("favorites")),j=[],d="LjEUfGR3AcoDRt53CmW0qfOsxNiDSUCH";Object(a.useEffect)((function(){function e(){return(e=Object(C.a)(N.a.mark((function e(){var t,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=0;case 2:if(!(t<l.length)){e.next=11;break}return e.next=5,I.a.get("https://dataservice.accuweather.com/currentconditions/v1/".concat(l[t].cityCode,"?apikey=").concat(d));case 5:c=e.sent,j.push({city:l[t].city,cityCode:l[t].cityCode,info:[c.data[0].Temperature.Metric.Value,c.data[0].Temperature.Metric.Unit,c.data[0].WeatherText]}),l.length-1===t&&o(j);case 8:t++,e.next=2;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),b(),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var b=function(){R.a.error("Oops...Cant fetch Favorites data, Problem with server conaction... ",{position:R.a.POSITION.TOP_CENTER,autoClose:2e3})};return Object(h.jsxs)(p.a,{style:{marginTop:"1rem"},container:!0,spacing:4,children:[Object(h.jsx)(p.a,{item:!0,xs:!1,md:1}),0!==l.length&&i.length===l.length?i.map((function(e){return Object(h.jsx)(p.a,{item:!0,xs:12,md:3,children:Object(h.jsx)(W,{city:e.city,temp:e.info[0],units:e.info[1],description:e.info[2],clicked:function(){return a=e.city,n=e.cityCode,c(F(a,n)),c(P(n)),void t("/");var a,n}})},e.cityCode+"@@")})):Object(h.jsx)("h1",{children:"No Favorites Found!"}),Object(h.jsx)(p.a,{item:!0,xs:!1,md:1})]})};c(154);var z=function(){Object(a.useEffect)((function(){e(F("Tel-Aviv","215854")),e(P("215854"))}),[]);var e=Object(s.b)();return JSON.parse(localStorage.getItem("favorites"))||localStorage.setItem("favorites",JSON.stringify([])),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(f,{}),Object(h.jsx)("main",{children:Object(h.jsxs)(M.c,{children:[Object(h.jsx)(M.a,{path:"/",element:Object(h.jsx)(L,{})}),Object(h.jsx)(M.a,{path:"/favorites",element:Object(h.jsx)(q,{})})]})})]})},G=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,211)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),r(e),i(e)}))},B=c(45),X={weatherIcon:"",temperature:"",weatherText:"",city:"",cityCode:"",units:""},Y={days:[],test:!0},K=Object(o.b)({current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;return t.type===k?Object(B.a)(Object(B.a)({},e),{},{temperature:t.payload[0],weatherText:t.payload[1],city:t.payload[2],cityCode:t.payload[3],weatherIcon:t.payload[4],units:t.payload[5]}):e},forecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;return t.type===E?Object(B.a)(Object(B.a)({},e),{},{days:t.payload}):e}}),Z=K,Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,$=Object(o.d)(Z,Q(Object(o.a)(l.a)));i.a.render(Object(h.jsx)(s.a,{store:$,children:Object(h.jsx)(j.a,{children:Object(h.jsx)(z,{})})}),document.getElementById("root")),G()}},[[156,1,2]]]);
//# sourceMappingURL=main.3cb32026.chunk.js.map